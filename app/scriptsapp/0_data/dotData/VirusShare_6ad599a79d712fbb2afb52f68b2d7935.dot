digraph {
140 [label="set -e "];
140 -> 140
2 [label="ping -q -w 1 -c 1 www.baidu.com /dev/null "];
2 -> 2
187 [label="/dev/null "];
187 -> 187
6 [label="echo Plese check your network. "];
6 -> 196 [label="||,SC,(,"];
196 [label="exit 1 "];
196 -> 10 [label="&&,"];
10 [label="UNAME=$(uname | tr \"[:upper:]\" \"[:lower:]\") "];
10 -> 12 [label="),"];
12 [label="uname "];
12 -> 14 [label="N,N,N,"];
14 [label="tr [:upper:] [:lower:] "];
14 -> 16 [label="N,"];
16 [label="[ $UNAME = linux ] "];
16 -> 18 [label="SC,N,if,"];
18 [label="[ -f /etc/lsb-release -o -d /etc/lsb-release.d ] "];
18 -> 20 [label=";,then,SC,N,if,"];
20 [label=", word=\"distro=$(lsb_release -i | cut -d: -f2 | sed s/'^\\t'//)\" "];
20 -> 22 [label=";,then,"];
22 [label="lsb_release -i "];
22 -> 24 [label="N,N,N,"];
24 [label="cut -d: -f2 "];
24 -> 26 [label="N,"];
26 [label="sed s/^t// "];
26 -> 28 [label="N,"];
28 [label="distro=$(ls -d /etc/[A-Za-z]*[_-][rv]e[lr]* | grep -v \"lsb\" | cut -d\'/\' -f3 | cut -d\'-\' -f1 | cut -d\'_\' -f1) "];
28 -> 30 [label="else,"];
30 [label="ls -d /etc/[A-Za-z]*[_-][rv]e[lr]* "];
30 -> 32 [label="N,N,N,"];
32 [label="grep -v lsb "];
32 -> 34 [label="N,"];
34 [label="cut -d/ -f3 "];
34 -> 36 [label="N,"];
36 [label="cut -d- -f1 "];
36 -> 38 [label="N,"];
38 [label="cut -d_ -f1 "];
38 -> 40 [label="N,"];
40 [label="[ $distro =  ] "];
40 -> 42 [label="fi,fi,"];
42 [label="distro=$UNAME "];
42 -> 44 [label="&&,"];
44 [label="unset UNAME "];
44 -> 46 [label="N,"];
46 [label="[ $1 ] "];
46 -> 48 [label="SC,N,if,"];
48 [label="uid=$1 "];
48 -> 50 [label=";,then,"];
50 [label="uid=2 "];
50 -> 52 [label="N,else,"];
52 [label="[ $2 ] "];
52 -> 54 [label="N,fi,SC,N,if,"];
54 [label="hname=$2 "];
54 -> 56 [label=";,then,"];
56 [label=", word=\"hname=`ip -4 route get 114.114.114.114 | awk {'print $7'} | tr -d '\\n'`\" "];
56 -> 58 [label="N,else,"];
58 [label="ip -4 route get 114.114.114.114 "];
58 -> 60 [label="N,N,N,"];
60 [label="awk {print $7} "];
60 -> 62 [label="N,"];
62 [label="tr -d \\n "];
62 -> 64 [label="N,"];
64 [label="grep -q -F * soft memlock 262144 /etc/security/limits.conf "];
64 -> 66 [label="fi,N,(,),SC,{,"];
66 [label="echo * soft memlock 262144 /etc/security/limits.conf "];
66 -> 74 [label="||,"];
74 [label="/etc/security/limits.conf "];
74 -> 74
70 [label="grep -q -F * hard memlock 262144 /etc/security/limits.conf "];
70 -> 72 [label="\n,"];
72 [label="echo * hard memlock 262144 /etc/security/limits.conf "];
72 -> 74 [label="||,"];
74 [label="/etc/security/limits.conf "];
74 -> 74
76 [label="grep -q -F vm.nr_hugepages = 256 /etc/sysctl.conf "];
76 -> 78 [label="\n,"];
78 [label="echo vm.nr_hugepages = 256 /etc/sysctl.conf "];
78 -> 80 [label="||,"];
80 [label="/etc/sysctl.conf "];
80 -> 80
134 [label="set +e "];
134 -> 84 [label="\n,"];
84 [label="sysctl -w vm.nr_hugepages=256 "];
84 -> 140 [label="\n,"];
140 [label="set -e "];
140 -> 88 [label="\n,"];
88 [label="wget --no-check-certificate https://www.yiluzhuanqian.com/soft/linux/yilu_2_5.tgz -O /opt/yilu.tgz "];
88 -> 90 [label="\n,"];
90 [label="tar zxf /opt/yilu.tgz -C /opt/ "];
90 -> 92 [label="\n,"];
92 [label="/opt/yilu/mservice -user_id $uid -reg_device -dev_name $hname "];
92 -> 134 [label="\n,"];
134 [label="set +e "];
134 -> 96 [label="\n,"];
96 [label="/opt/yilu/mservice -service uninstall "];
96 -> 98 [label="\n,"];
98 [label="/opt/yilu/mservice -service install "];
98 -> 100 [label="\n,"];
100 [label="[ ${distro = *ubuntu* ] "];
100 -> 102 [label="\n,},SC,N,if,"];
102 [label="[ ${distro = *debian* ] "];
102 -> 134 [label="||,"];
134 [label="set +e "];
134 -> 106 [label=";,then,"];
106 [label="apt-get -y update "];
106 -> 108 [label="\n,"];
108 [label="apt-get -y install wget cron sudo "];
108 -> 140 [label="\n,"];
140 [label="set -e "];
140 -> 168 [label="\n,"];
168 [label="minstall "];
168 -> 150 [label="\n,"];
150 [label="service YiluzhuanqianSer restart "];
150 -> 185 [label="\n,"];
185 [label="sudo crontab -l -u root /dev/null "];
185 -> 187 [label="\n,N,"];
187 [label="/dev/null "];
187 -> 187
183 [label="grep -q -F service YiluzhuanqianSer start "];
183 -> 185 [label="N,"];
185 [label="sudo crontab -l -u root /dev/null "];
185 -> 187 [label="||,N,SC,(,"];
187 [label="/dev/null "];
187 -> 187
162 [label="echo * * * * * pidof mservice || service YiluzhuanqianSer start "];
162 -> 191 [label=";,"];
191 [label="sudo crontab -u root - "];
191 -> 130 [label="),N,"];
130 [label="[ ${distro = *centos* ] "];
130 -> 132 [label="\n,elif,"];
132 [label="[ ${distro = *redhat* ] "];
132 -> 134 [label="||,"];
134 [label="set +e "];
134 -> 136 [label=";,then,"];
136 [label="yum -y update "];
136 -> 138 [label="\n,"];
138 [label="yum -y install wget crontab sudo "];
138 -> 140 [label="\n,"];
140 [label="set -e "];
140 -> 142 [label="\n,"];
142 [label=", word=\"osversion=`grep -oE '[0-9]+\\.[0-9]+' /etc/redhat-release`\" "];
142 -> 144 [label="\n,"];
144 [label="grep -oE [0-9]+\\.[0-9]+ /etc/redhat-release "];
144 -> 146 [label="N,N,"];
146 [label="[ $osversion = 7* ] "];
146 -> 168 [label="\n,SC,N,if,"];
168 [label="minstall "];
168 -> 150 [label=";,then,"];
150 [label="service YiluzhuanqianSer restart "];
150 -> 185 [label="\n,"];
185 [label="sudo crontab -l -u root /dev/null "];
185 -> 187 [label="\n,N,"];
187 [label="/dev/null "];
187 -> 187
183 [label="grep -q -F service YiluzhuanqianSer start "];
183 -> 185 [label="N,"];
185 [label="sudo crontab -l -u root /dev/null "];
185 -> 187 [label="||,N,SC,(,"];
187 [label="/dev/null "];
187 -> 187
162 [label="echo * * * * * pidof mservice || service YiluzhuanqianSer start "];
162 -> 191 [label=";,"];
191 [label="sudo crontab -u root - "];
191 -> 166 [label="),N,"];
166 [label="[ $osversion = 6* ] "];
166 -> 168 [label="\n,elif,"];
168 [label="minstall "];
168 -> 170 [label=";,then,"];
170 [label="sudo pidof mservice "];
170 -> 172 [label="\n,N,"];
172 [label="xargs kill -9 /dev/null "];
172 -> 187 [label="N,"];
187 [label="/dev/null "];
187 -> 187
176 [label="nohup /opt/yilu/mservice /dev/null "];
176 -> 187 [label="\n,"];
187 [label="/dev/null "];
187 -> 187
185 [label="sudo crontab -l -u root /dev/null "];
185 -> 187 [label="&,N,"];
187 [label="/dev/null "];
187 -> 187
183 [label="grep -q -F service YiluzhuanqianSer start "];
183 -> 185 [label="N,"];
185 [label="sudo crontab -l -u root /dev/null "];
185 -> 187 [label="||,N,SC,(,"];
187 [label="/dev/null "];
187 -> 187
189 [label="echo * * * * * pidof mservice || nohup /opt/yilu/mservice > /dev/null 2>&1 & "];
189 -> 191 [label=";,"];
191 [label="sudo crontab -u root - "];
191 -> 193 [label="),N,"];
193 [label="echo $distro "];
193 -> 195 [label="\n,fi,\n,else,"];
195 [label="echo This system is not supported! "];
195 -> 196 [label="\n,"];
}
